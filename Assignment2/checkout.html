<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout - BeCleaner</title>
  <meta name="description" content="Checkout — review your order and complete payment." />
  <!-- Bootstrap for grid and form styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* small checkout-specific changes */
    .checkout-wrapper{padding:28px 0 60px;min-height:100vh}
    .checkout-container{max-width:1100px;margin:0 auto}
    .checkout-btn{width:100%;padding:12px;border-radius:10px;font-weight:800}
    /* local small helper in case global styles differ */
    .summary-line .meta{color:var(--muted);font-size:.9rem}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html"><span class="be">Be</span><span class="cleaner">cleaner</span></a>
      <nav class="header-nav" aria-label="Top">
        <a href="index.html">Home</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="checkout-wrapper">
    <div class="container checkout-container">
      <!-- Progress stepper (required) -->
      <nav class="d-flex gap-2 align-items-center mb-3" aria-label="Checkout steps">
        <div class="small-muted" role="text">Cart</div>
        <div class="small-muted">→</div>
        <div class="small-muted" role="text">Address</div>
        <div class="small-muted">→</div>
        <div class="small-muted" role="text">Payment</div>
        <div class="small-muted">→</div>
        <div class="fw-bold" aria-current="step">Review</div>
      </nav>

      <div class="progress-title">Checkout</div>
      <div class="small-muted mb-3">Complete the form to place your order.</div>

      <div class="row g-4">
        <!-- left: form -->
        <div class="col-12 col-md-7">
          <div class="card-muted">
            <h4>Customer & Shipping</h4>
            <form id="checkout-form" novalidate>
              <div class="mb-3">
                <label for="serviceSelect" class="form-label">Select service</label>
                <select id="serviceSelect" class="form-select" required>
                  <option value="" data-price="0">Choose...</option>
                  <option value="Standard Home Cleaning" data-price="49">Standard Home Cleaning — $49</option>
                  <option value="Deep Cleaning" data-price="99">Deep Cleaning — $99</option>
                  <option value="Office Cleaning" data-price="79">Office Cleaning — $79</option>
                </select>
              </div>

              <div class="row g-3">
                <div class="col-12">
                  <label for="fullName" class="form-label">Full name</label>
                  <input id="fullName" class="form-control" type="text" placeholder="Jane Doe" required>
                </div>
                <div class="col-md-6">
                  <label for="email" class="form-label">Email</label>
                  <input id="email" class="form-control" type="email" placeholder="you@example.com" required>
                </div>
                <div class="col-md-6">
                  <label for="phone" class="form-label">Phone</label>
                  <input id="phone" class="form-control" type="tel" placeholder="+1 (555) 555-5555" required>
                </div>
                <div class="col-12">
                  <label for="address" class="form-label">Address</label>
                  <input id="address" class="form-control" type="text" placeholder="123 Main St" required>
                </div>
                <div class="col-md-4">
                  <label for="city" class="form-label">City</label>
                  <input id="city" class="form-control" type="text" required>
                </div>
                <div class="col-md-4">
                  <label for="postal" class="form-label">Postal code</label>
                  <input id="postal" class="form-control" type="text" required>
                </div>
                <div class="col-md-4">
                  <label for="country" class="form-label">Country</label>
                  <select id="country" class="form-select" required>
                    <option value="">Choose...</option>
                    <option>United States</option>
                    <option>Canada</option>
                    <option>United Kingdom</option>
                    <option>Australia</option>
                  </select>
                </div>
                <div class="col-12">
                  <div class="form-check">
                    <input id="billingSame" class="form-check-input" type="checkbox" checked>
                    <label for="billingSame" class="form-check-label">Billing same as shipping</label>
                  </div>
                </div>
              </div>

              <hr class="my-3" />
              <h5>Add-ons</h5>
              <div class="mb-2 service-checkbox">
                <input id="addonWindow" class="form-check-input me-2 addon" type="checkbox" data-price="15">
                <label for="addonWindow" class="form-check-label">Window add-on — $15</label>
              </div>
              <div class="mb-2 service-checkbox">
                <input id="addonFridge" class="form-check-input me-2 addon" type="checkbox" data-price="25">
                <label for="addonFridge" class="form-check-label">Fridge interior — $25</label>
              </div>

              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <label for="date" class="form-label">Preferred date</label>
                  <input id="date" class="form-control" type="date" required>
                </div>
                <div class="col-md-6">
                  <label for="time" class="form-label">Preferred time</label>
                  <input id="time" class="form-control" type="time" required>
                </div>
              </div>

              <hr class="my-3" />
              <h5>Payment</h5>
              <fieldset class="mb-3">
                <legend class="visually-hidden">Payment method</legend>
                <div class="form-check">
                  <input id="pay-card" class="form-check-input" name="paymentMethod" type="radio" value="card" checked>
                  <label for="pay-card" class="form-check-label">Card</label>
                </div>
                <div class="form-check">
                  <input id="pay-cod" class="form-check-input" name="paymentMethod" type="radio" value="cod">
                  <label for="pay-cod" class="form-check-label">Cash on Delivery (COD)</label>
                </div>
                <div class="form-check">
                  <input id="pay-wallet" class="form-check-input" name="paymentMethod" type="radio" value="wallet">
                  <label for="pay-wallet" class="form-check-label">Wallet</label>
                </div>
              </fieldset>

              <div id="cardFields" class="mb-3">
                <label for="cardName" class="form-label">Cardholder name</label>
                <input id="cardName" class="form-control mb-2" type="text" placeholder="Jane Doe" autocomplete="cc-name">

                <label for="cardNumber" class="form-label">Card number</label>
                <input id="cardNumber" inputmode="numeric" autocomplete="cc-number" class="form-control mb-2" type="text" placeholder="1234 5678 9012 3456" maxlength="19" pattern="[0-9\s]{13,19}">
                <div class="row g-3">
                  <div class="col-6">
                    <label for="expiry" class="form-label">Expiry (MM/YY)</label>
                    <input id="expiry" autocomplete="cc-exp" class="form-control" type="text" placeholder="08/26" maxlength="5" pattern="(0[1-9]|1[0-2])\/\d{2}">
                  </div>
                  <div class="col-6">
                    <label for="cvv" class="form-label">CVV</label>
                    <input id="cvv" class="form-control" type="password" maxlength="4" pattern="\d{3,4}" placeholder="123" inputmode="numeric" autocomplete="cc-csc">
                  </div>
                </div>
              </div>

              <hr class="my-3" />
              <div class="mb-3 form-check">
                <input id="agreeTerms" class="form-check-input" type="checkbox">
                <label for="agreeTerms" class="form-check-label">I agree to the <a href="/terms.html">terms and conditions</a>.</label>
              </div>

              <div class="d-grid">
                <button id="placeOrderBtn" class="checkout-btn" type="button" disabled>Place Order</button>
              </div>
            </form>
          </div>
        </div>

        <!-- right: order summary -->
        <aside class="col-12 col-md-5">
          <div class="order-summary" aria-live="polite" style="">
            <h3>Order summary</h3>
            <div id="itemsList" class="order-items"><div class="small-muted">No items selected</div></div>

            <div class="totals mt-3">
              <div class="row">
                <div class="col-8 small-muted">Subtotal</div><div class="col-4 text-end" id="subtotal">$0.00</div>
              </div>
              <div class="row">
                <div class="col-8 small-muted">Shipping</div><div class="col-4 text-end" id="shipping">$5.00</div>
              </div>
              <div class="row">
                <div class="col-8 small-muted">Tax</div><div class="col-4 text-end" id="tax">$0.00</div>
              </div>
              <div class="row mt-3 fw-bold">
                <div class="col-8">Grand total</div><div class="col-4 text-end" id="grandTotal">$0.00</div>
              </div>
            </div>

            <div class="mt-3 coupon-row">
              <label for="coupon" class="form-label">Apply coupon</label>
              <div class="d-flex gap-2">
                <input id="coupon" class="form-control form-control-sm" type="text" placeholder="Coupon code">
                <button id="applyCoupon" class="btn btn-outline-secondary btn-sm" type="button">Apply</button>
              </div>
              <div class="form-text small-muted mt-1">(Coupons are non-functional in this demo.)</div>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <footer class="py-4 mt-4 border-top">
    <div class="container d-flex justify-content-between flex-wrap">
      <div class="small-muted">© 2025 BeCleaner — All rights reserved.</div>
      <div><a href="/privacy.html" class="small-muted me-3">Privacy</a><a href="/terms.html" class="small-muted">Terms</a></div>
    </div>
  </footer>

  <!-- Bootstrap bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    (function () {
      // dynamic summary logic (keeps order summary accurate)
      const serviceSelect = document.getElementById('serviceSelect');
      const addonEls = Array.from(document.querySelectorAll('.addon'));
      const itemsList = document.getElementById('itemsList');
      const subtotalEl = document.getElementById('subtotal');
      const shippingEl = document.getElementById('shipping');
      const taxEl = document.getElementById('tax');
      const grandEl = document.getElementById('grandTotal');
      const SHIPPING = 5.00;
      const TAX_RATE = 0.101;

      function fmt(n){ return '$' + n.toFixed(2); }

      function getItems(){
        const out = [];
        const opt = serviceSelect.selectedOptions[0];
        if (opt && opt.value && Number(opt.dataset.price) > 0) {
          out.push({ name: opt.value, qty: 1, price: Number(opt.dataset.price) });
        }
        addonEls.forEach(a=>{ if(a.checked){ const label = a.nextElementSibling ? a.nextElementSibling.textContent.trim() : a.id; out.push({ name: label, qty:1, price: Number(a.dataset.price || 0) }); }});
        return out;
      }

      function renderSummary(){
        const items = getItems();
        itemsList.innerHTML = '';
        if(items.length===0){ itemsList.innerHTML = '<div class="small-muted">No items selected</div>'; }
        let subtotal = 0;
        items.forEach(it=>{
          const line = document.createElement('div');
          line.className = 'summary-line';
          line.innerHTML = '<div style="max-width:68%;"><div class="fw-semibold text-truncate">'+escapeHtml(it.name)+'</div><div class="meta small-muted">Qty: '+it.qty+'</div></div><div class="fw-semibold">'+fmt(it.price*it.qty)+'</div>';
          itemsList.appendChild(line);
          subtotal += it.price*it.qty;
        });
        const tax = Math.round(subtotal * TAX_RATE * 100)/100;
        const grand = Math.round((subtotal + SHIPPING + tax)*100)/100;
        subtotalEl.textContent = fmt(subtotal);
        shippingEl.textContent = fmt(SHIPPING);
        taxEl.textContent = fmt(tax);
        grandEl.textContent = fmt(grand);
      }

      function escapeHtml(t){ const d=document.createElement('div'); d.textContent=t; return d.innerHTML; }

      serviceSelect.addEventListener('change', renderSummary);
      addonEls.forEach(a=>a.addEventListener('change', renderSummary));
      ['date','time'].forEach(id=>{ const el=document.getElementById(id); if(el) el.addEventListener('input', renderSummary); });

      renderSummary();

      // Payment fields toggle & place order enable
      const payCard = document.getElementById('pay-card');
      const payCOD = document.getElementById('pay-cod');
      const payWallet = document.getElementById('pay-wallet');
      const cardFields = document.getElementById('cardFields');
      function updateCardFields(){ if(payCard && payCard.checked){ cardFields.style.display='block'; } else { cardFields.style.display='none'; } }
      [payCard,payCOD,payWallet].forEach(r=>r && r.addEventListener('change', updateCardFields));
      updateCardFields();

      const agree = document.getElementById('agreeTerms');
      const placeBtn = document.getElementById('placeOrderBtn');
      function togglePlace(){ placeBtn.disabled = !agree.checked; }
      agree.addEventListener('change', togglePlace);
      togglePlace();

      // Place order (validate and redirect to success.html)
      const form = document.getElementById('checkout-form');
      placeBtn.addEventListener('click', function(){
        if (!form.checkValidity()) { form.classList.add('was-validated'); const invalid = form.querySelector(':invalid'); if(invalid) invalid.scrollIntoView({behavior:'smooth',block:'center'}); return; }
        placeBtn.textContent = 'Placing...'; placeBtn.disabled = true;
        setTimeout(()=> window.location.href='success.html',700);
      });
    })();
  </script>
</body>
</html>