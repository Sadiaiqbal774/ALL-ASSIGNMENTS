<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BeCleaner ‚Äî Professional cleaning services</title>
  <meta name="description" content="BeCleaner ‚Äî eco-friendly home & office cleaning. Book a trusted cleaner quickly." />

  <link rel="stylesheet" href="/css/styles.css">

  <style>
    /* Product list + card styles */
    .products-section { margin-top: 28px; }
    #products-filter-form { display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:16px; }
    #products-filter-form .form-control, #products-filter-form .form-select { min-width:140px; }
    #product-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      margin-top: 10px;
    }
    .product-card {
      padding: 16px;
      border-radius: 10px;
      background: #fff;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 6px 18px rgba(16,24,40,0.04);
    }
    .product-card .price { font-weight:700; color:#0b76ff; margin-top:6px; }
    .product-card .category { font-size:.9rem; color:#6b7280; }
    .pagination { display:flex; gap:8px; align-items:center; justify-content:center; margin-top:18px; }
    .pagination button { padding:8px 12px; border-radius:6px; border:none; background:#0b76ff; color:#fff; cursor:pointer; }
    .pagination button[disabled] { background:#9aa6b2; cursor:default; }
    .empty-note { padding:18px; text-align:center; color:#6b7280; }
    .filter-row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    @media (max-width:700px) { #products-filter-form { flex-direction:column; align-items:stretch; } }
  </style>
</head>
<body>
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="index.html"><span class="be">Be</span><span class="cleaner">cleaner</span></a>

      <input id="nav-toggle" class="nav-toggle" type="checkbox" aria-label="Toggle navigation" />
      <label for="nav-toggle" class="nav-toggle-label" aria-hidden="true"><span class="hamburger" aria-hidden="true"></span></label>

      <nav class="main-nav" id="main-nav" role="navigation" aria-label="Main navigation">
        <ul>
          <li><a href="#home">Home</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#how">How we work</a></li>
          <li><a href="#testimonials">Testimonials</a></li>
          <li><a href="#about">About</a></li>
          <li><a class="btn-book" href="checkout.html">Book Now</a></li>
          <li><a class="btn-manage" href="crud.html">Manage Bookings</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main" role="main">
    <!-- HERO -->
    <section id="home" class="hero" aria-labelledby="hero-heading">
      <div class="container hero-grid">
        <div class="hero-text">
          <h1 id="hero-heading"><span class="highlight">Spotless Spaces,</span><br />Happy Faces</h1>
          <p class="subtitle">Let our expert team transform your home or office. Eco-friendly, trusted, and satisfaction guaranteed.</p>
          <a class="btn-main" href="checkout.html">Book Your Cleaning</a>
          <a class="btn-main" href="crud.html" style="margin-left:12px; background:#0b76ff; border-color:#0b76ff;">Manage Bookings</a>
        </div>

        <div class="hero-image" aria-hidden="false">
          <img src="/images/hero.png" alt="Cleaner using eco-friendly products to clean a living room" class="hero-img" width="1200" height="800" loading="lazy" />
        </div>
      </div>
    </section>

    <!-- SERVICES + PRODUCTS -->
    <section id="services" class="services-section" aria-labelledby="services-heading">
      <div class="container">
        <h2 id="services-heading" class="services-title">We work hard to make your place clean</h2>

        <div class="services-grid" role="list">
          <article class="service-item" role="listitem">
            <div class="service-icon" aria-hidden="true">üßπ</div>
            <div class="service-body">
              <h3>Floor cleaning</h3>
              <p>Expert cleaning for hardwood, tile, laminate and more.</p>
            </div>
          </article>

          <article class="service-item" role="listitem">
            <div class="service-icon" aria-hidden="true">ü™ü</div>
            <div class="service-body">
              <h3>Window cleaning</h3>
              <p>Streak-free windows that bring in natural light.</p>
            </div>
          </article>

          <article class="service-item" role="listitem">
            <div class="service-icon" aria-hidden="true">üß∫</div>
            <div class="service-body">
              <h3>Laundry</h3>
              <p>Wash, dry and fold with care.</p>
            </div>
          </article>
        </div>

        <!-- Products Section (dynamic) -->
        <section class="products-section" aria-label="Products">
          <form id="products-filter-form" class="mb-2" aria-label="Filter products">
            <div class="filter-row">
              <select id="filter-category" class="form-select" aria-label="Category filter">
                <option value="">All categories</option>
                <option value="cleaning">cleaning</option>
                <option value="service">service</option>
                <option value="office">office</option>
              </select>

              <input id="filter-min" class="form-control" type="number" placeholder="Min price" min="0" />

              <input id="filter-max" class="form-control" type="number" placeholder="Max price" min="0" />

              <input id="filter-search" class="form-control" type="search" placeholder="Search products" />

              <button id="applyFilters" class="btn-main" type="submit" style="padding:6px 12px; font-size:0.95rem;">Apply</button>
              <button id="clearFilters" class="btn-main" type="button" style="padding:6px 12px; font-size:0.95rem; background:#6b7280; margin-left:6px;">Clear</button>
            </div>
          </form>

          <div id="product-list" aria-live="polite">
            <!-- product cards inserted here -->
          </div>

          <div class="pagination" role="navigation" aria-label="Product pagination">
            <button id="prevPage" disabled>Previous</button>
            <div id="pageInfo" style="min-width:120px; text-align:center;">Page 1 of 1</div>
            <button id="nextPage" disabled>Next</button>
          </div>

          <div id="products-status" class="muted-small" style="text-align:center; margin-top:10px;"></div>
        </section>
        <!-- /Products Section -->

      </div>
    </section>

    <!-- HOW WE WORK -->
    <section id="how" class="how-we-work" aria-labelledby="how-heading">
      <div class="container text-center">
        <h2 id="how-heading" class="how-we-work-banner">HOW WE WORK</h2>
        <div class="how-steps" role="list">
          <div class="how-step" role="listitem"><div class="how-step-circle">1</div><div class="how-step-text"><h3>Book a slot</h3><p>Choose a date and service.</p></div></div>
          <div class="how-step" role="listitem"><div class="how-step-circle">2</div><div class="how-step-text"><h3>We arrive on time</h3><p>Trained professionals with supplies.</p></div></div>
          <div class="how-step" role="listitem"><div class="how-step-circle">3</div><div class="how-step-text"><h3>Enjoy a clean home</h3><p>Relax ‚Äî we handle everything.</p></div></div>
        </div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section id="testimonials" class="testimonials" aria-labelledby="testimonials-heading">
      <div class="container">
        <h2 id="testimonials-heading" class="section-title">Trusted by customers & partners</h2>

        <div class="testimonials-grid" role="list">
          <figure class="testimonial-card" role="listitem">
            <img src="/images/client1.jpg" alt="Client portrait" class="testimonial-img" width="160" height="160" loading="lazy" />
            <blockquote class="testimonial-text">‚ÄúSparkleClean did an amazing job! My house has never looked better.‚Äù</blockquote>
            <figcaption class="client-name">‚Äî Sarah M.</figcaption>
          </figure>

          <figure class="testimonial-card" role="listitem">
            <img src="/images/client2.jpg" alt="Client portrait" class="testimonial-img" width="160" height="160" loading="lazy" />
            <blockquote class="testimonial-text">‚ÄúProfessional, quick, and eco-friendly.‚Äù</blockquote>
            <figcaption class="client-name">‚Äî James K.</figcaption>
          </figure>

          <figure class="testimonial-card" role="listitem">
            <img src="/images/client3.jpg" alt="Client portrait" class="testimonial-img" width="160" height="160" loading="lazy" />
            <blockquote class="testimonial-text">‚ÄúBooked online and everything was perfect.‚Äù</blockquote>
            <figcaption class="client-name">‚Äî Ayesha R.</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- SECONDARY CTA -->
    <section class="secondary-cta" aria-labelledby="secondary-cta-heading">
      <div class="container">
        <div class="cta-inner">
          <h2 id="secondary-cta-heading">Ready to make your home sparkle?</h2>
          <p class="cta-sub">Book a trusted cleaner in 2 minutes ‚Äî flexible scheduling and eco-friendly products.</p>
          <a class="btn-main cta-large" href="checkout.html">Book Now ‚Äî It's Easy</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
      <div>
        <p>¬© 2025 BeCleaner ‚Äî All rights reserved.</p>
        <p class="footer-small">Replace example images in images/ with optimized assets.</p>
      </div>
      <nav aria-label="Footer links" class="footer-links">
        <ul>
          <li><a href="mailto:hello@becleaner.example">hello@becleaner.example</a></li>
          <li><a href="tel:+1234567890">+1 (234) 567-890</a></li>
          <li><a href="crud.html">Manage Bookings</a></li>
        </ul>
      </nav>
    </div>
  </footer>

  <script>
  (function(){
    const API = '/api/products/list';
    let state = { page: 1, limit: 3, totalPages: 1 };

    const el = {
      list: document.getElementById('product-list'),
      pageInfo: document.getElementById('pageInfo'),
      prev: document.getElementById('prevPage'),
      next: document.getElementById('nextPage'),
      status: document.getElementById('products-status'),
      form: document.getElementById('products-filter-form'),
      category: document.getElementById('filter-category'),
      min: document.getElementById('filter-min'),
      max: document.getElementById('filter-max'),
      search: document.getElementById('filter-search'),
      clear: document.getElementById('clearFilters')
    };

    function escapeHtml(s){ return (s||'').toString().replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]); }

    function buildQuery(){
      const q = new URLSearchParams();
      q.set('page', state.page);
      q.set('limit', state.limit);
      if(el.category && el.category.value) q.set('category', el.category.value);
      if(el.min && el.min.value) q.set('minPrice', el.min.value);
      if(el.max && el.max.value) q.set('maxPrice', el.max.value);
      if(el.search && el.search.value) q.set('search', el.search.value.trim());
      return q.toString();
    }

    async function load(){
      el.status.textContent = 'Loading‚Ä¶';
      el.list.innerHTML = '';
      try {
        const res = await fetch(`${API}?${buildQuery()}`);
        if(!res.ok) throw new Error('Network error');
        const data = await res.json();

        state.totalPages = data.totalPages || 1;
        renderList(data.products || []);
        updatePagination();
        el.status.textContent = `Showing ${data.products.length} of ${data.total} products`;
      } catch(err){
        console.error(err);
        el.status.textContent = 'Failed to load products';
        el.list.innerHTML = '<div class="empty-note">Failed to load products.</div>';
        state.totalPages = 1;
        updatePagination();
      }
    }

    function renderList(products){
      if(!products || products.length === 0){
        el.list.innerHTML = '<div class="empty-note">No products found.</div>';
        return;
      }
      el.list.innerHTML = products.map(p=>`
        <article class="product-card" role="article" aria-label="${escapeHtml(p.name)}">
          <h3>${escapeHtml(p.name)}</h3>
          <div class="category">${escapeHtml(p.category)}</div>
          <div class="price">$${(p.price||0).toFixed(2)}</div>
          <p>${escapeHtml(p.description||'')}</p>
        </article>
      `).join('');
    }

    function updatePagination(){
      el.pageInfo.textContent = `Page ${state.page} of ${state.totalPages}`;
      el.prev.disabled = state.page <= 1;
      el.next.disabled = state.page >= state.totalPages;
    }

    // Handlers
    el.next.addEventListener('click', ()=> { if(state.page < state.totalPages){ state.page++; load(); }});
    el.prev.addEventListener('click', ()=> { if(state.page > 1){ state.page--; load(); }});
    el.form.addEventListener('submit', (e)=>{ e.preventDefault(); state.page = 1; load(); });
    el.clear.addEventListener('click', ()=> {
      el.category.value = '';
      el.min.value = '';
      el.max.value = '';
      el.search.value = '';
      state.page = 1;
      load();
    });

    // initial load
    load();
  })();
  </script>
</body>
</html>
